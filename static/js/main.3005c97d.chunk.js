(this.webpackJsonptetris2=this.webpackJsonptetris2||[]).push([[0],{37:function(t,e,r){},40:function(t,e,r){"use strict";r.r(e);var n=r(7),a=r.n(n),c=r(30),i=r.n(c),u=r(0),o=r.n(u),f=r(3),l=r(8),s=(r(37),r(31)),x=r(14),b=(Object(s.a)({apiKey:"AIzaSyCCOIXBE_hECvx_E9qGy6CwJADtJuSUui8",authDomain:"tetris-fc499.firebaseapp.com",databaseURL:"https://tetris-fc499-default-rtdb.firebaseio.com",projectId:"tetris-fc499",storageBucket:"tetris-fc499.appspot.com",messagingSenderId:"74944565482",appId:"1:74944565482:web:ad09a4c5f4a9648bb58793"}),Object(x.e)()),j=r(12),h=15,O=10,v=["black","purple","yellow","orange","blue","cyan","green","red"],m=function(t,e){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=e}),[e]),Object(n.useEffect)((function(){var e=function(e){e.key===t&&r.current()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t])},y=function(){var t=Object(n.useRef)(null),e=Object(n.useRef)(null),r=Object(n.useRef)(null),a=Object(n.useRef)(null),c=Object(n.useRef)(null),i=Object(n.useRef)(null),u=Object(n.useState)(0),s=Object(l.a)(u,2),y=s[0],d=s[1],p=Object(n.useState)(1),g=Object(l.a)(p,2),S=g[0],w=g[1],E=Object(n.useState)({x:0,y:0,matrix:null}),k=Object(l.a)(E,2),R=k[0],A=k[1],C=Object(n.useState)(null),M=Object(l.a)(C,2),N=M[0],I=M[1],L=Object(n.useState)(-1),T=Object(l.a)(L,2),J=T[0],B=T[1],D=Object(n.useState)(500),U=Object(l.a)(D,2),q=U[0],P=U[1],_=Object(n.useState)(null),z=Object(l.a)(_,2),G=(z[0],z[1]),H=Object(n.useState)(null),K=Object(l.a)(H,2),W=K[0],X=K[1],F=Object(n.useState)(!0),Q=Object(l.a)(F,2),V=Q[0],Y=Q[1],Z=Object(n.useState)(null),$=Object(l.a)(Z,2),tt=$[0],et=$[1],rt=Object(n.useState)(null),nt=Object(l.a)(rt,2),at=nt[0],ct=nt[1],it=Object(n.useState)(null),ut=Object(l.a)(it,2),ot=(ut[0],ut[1]),ft=Object(n.useState)(null),lt=Object(l.a)(ft,2),st=lt[0],xt=lt[1],bt=Object(n.useState)(null),jt=Object(l.a)(bt,2),ht=jt[0],Ot=jt[1],vt=Object(n.useState)({one:null,two:null,three:null}),mt=Object(l.a)(vt,2),yt=mt[0],dt=mt[1],pt=Object(n.useState)(null),gt=Object(l.a)(pt,2),St=(gt[0],gt[1]),wt=Object(n.useState)(null),Et=Object(l.a)(wt,2),kt=Et[0],Rt=Et[1],At=Object(n.useState)(null),Ct=Object(l.a)(At,2),Mt=(Ct[0],Ct[1]),Nt=Object(n.useState)(null),It=Object(l.a)(Nt,2),Lt=It[0],Tt=It[1],Jt=Object(n.useState)({score:0,level:1}),Bt=Object(l.a)(Jt,2),Dt=Bt[0],Ut=Bt[1],qt=Object(n.useState)(null),Pt=Object(l.a)(qt,2),_t=Pt[0],zt=Pt[1],Gt=Object(n.useState)(null),Ht=Object(l.a)(Gt,2),Kt=Ht[0],Wt=Ht[1],Xt=Object(n.useState)(null),Ft=Object(l.a)(Xt,2),Qt=Ft[0],Vt=Ft[1],Yt=Object(n.useState)(!1),Zt=Object(l.a)(Yt,2),$t=Zt[0],te=Zt[1],ee=Object(n.useState)(null),re=Object(l.a)(ee,2),ne=re[0],ae=re[1],ce=Object(n.useState)(null),ie=Object(l.a)(ce,2),ue=(ie[0],ie[1]);m("ArrowLeft",(function(){return R.matrix?ye(-1):null})),m("ArrowRight",(function(){return R.matrix?ye(1):null})),m("ArrowDown",(function(){return R.matrix?je():null})),m("ArrowUp",(function(){return R.matrix?Oe():null})),m("q",(function(){return R.matrix?ve(-1):null})),m("w",(function(){return R.matrix?ve(1):null})),m("e",(function(){return R.matrix?Le():null})),Object(n.useEffect)((function(){se(),le(),I(xe(h,O)),zt(xe(h,O)),et(xe(4,4)),Ot(xe(12,4))}),[]),Object(n.useEffect)((function(){if(ne){var t=Object(x.b)(b,"users");Object(x.f)(t,(function(t){t.docs.forEach(function(){var t=Object(f.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id===ne){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,oe(e.data().x,e.data().y,e.data().arena,e.data().score,e.data().level);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}}),[ne]),Object(n.useEffect)((function(){yt.one&&yt.two&&yt.three&&Ot(ge(ht,[yt.one,yt.two,yt.three],12,4))}),[yt]),Object(n.useEffect)((function(){if(ht)for(var t=0;t<ht.length;t++)for(var e=0;e<ht[0].length;e++)Ie(e,t,at)}),[ht]),Object(n.useEffect)((function(){at&&et(pe(tt,at,4,4))}),[at]),Object(n.useEffect)((function(){if(tt)for(var t=0;t<tt.length;t++)for(var e=0;e<tt[0].length;e++)Ne(e,t,at)}),[tt]),Object(n.useEffect)((function(){if(!(J<0)){var t=setInterval((function(){B(J+10)}),10);return J>q&&je(),function(){return clearInterval(t)}}}),[J]),Object(n.useEffect)((function(){if(N){if(be(W,N),R.matrix)for(var t=he(),e=0;e<R.matrix.length;e++)for(var r=0;r<R.matrix[e].length;r++)0!=R.matrix[e][r]&&(Ae(r,e,{x:R.x,y:R.y},W),Re(r,e,{x:R.x,y:R.y+t},W));ke(W)}}),[N]),Object(n.useEffect)((function(){_t&&(be(Lt,_t),ke(Lt))}),[_t]),Object(n.useEffect)((function(){if(R.matrix){be(W,N);for(var t=he(),e=0;e<R.matrix.length;e++)for(var r=0;r<R.matrix[e].length;r++)0!=R.matrix[e][r]&&(Ae(r,e,{x:R.x,y:R.y},W),Re(r,e,{x:R.x,y:R.y+t},W));ke(W),Kt&&ne&&fe()}}),[R]);var oe=function(t,e,r,n,a){if(r){for(var c=xe(h,O),i=0;i<h;i++)for(var u=0;u<O;u++)c[i][u]=r[10*i+u];Ut({score:n,level:a}),zt(c)}},fe=function(){var t=Object(f.a)(o.a.mark((function t(){var e,r,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],(r=N.slice()).forEach((function(t,n){r[n].forEach((function(t,r){e.push(t)}))})),R.matrix.forEach((function(t,r){R.matrix[r].forEach((function(t,n){0!=t&&(e[(R.y+r)*O+R.x+n]=t)}))})),n={x:R.x,y:R.y,arena:e,score:y,level:S},t.next=7,Object(x.h)(Kt,n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),le=function(){var t=a.current,e=c.current,r=t.getContext("2d"),n=e.getContext("2d");r.canvas.width=140,r.canvas.height=20,n.canvas.width=140,n.canvas.height=20,r.font="15px Arial",r.fillStyle="black",r.fillText("Hold",10,15),n.font="15px Arial",n.fillStyle="black",n.fillText("Next",10,15)},se=function(){var n=t.current;G(n);var a=n.getContext("2d");X(a);var c=e.current;ot(c);var u=c.getContext("2d");xt(u);var o=r.current;St(o);var f=o.getContext("2d");Rt(f),a.canvas.width=400,a.canvas.height=600,a.scale(40,40),u.canvas.width=140,u.canvas.height=140,u.scale(35,35),f.canvas.width=140,f.canvas.height=420,f.scale(35,35);var l=i.current;Mt(l);var s=l.getContext("2d");Tt(s),s.canvas.width=400,s.canvas.height=600,s.scale(40,40)},xe=function(t,e){for(var r=[],n=0;n<t;n++)r.push(Array.from(Array(e),(function(){return 0})));return r},be=function(t,e){for(var r=0;r<h;r++)for(var n=0;n<O;n++)Me(n,r,{x:0,y:0},t,e)},je=function(){de(N,{x:R.x,y:R.y+1,matrix:R.matrix})?(Se(N,{x:R.x,y:R.y,matrix:R.matrix}),A({x:R.x,y:R.y,matrix:R.matrix}),Ce(),we()):A({x:R.x,y:R.y+1,matrix:R.matrix}),V||B(0)},he=function(){var t=0;if(de(N,{x:R.x,y:R.y+1,matrix:R.matrix}))return t;for(;!de(N,{x:R.x,y:R.y+t,matrix:R.matrix});)t++;return t-1},Oe=function(){for(var t=0;!de(N,{x:R.x,y:R.y+t,matrix:R.matrix});)t++;A({x:R.x,y:R.y+t-1,matrix:R.matrix}),Se(N,{x:R.x,y:R.y+t-1,matrix:R.matrix}),Ce(),B(0),we()},ve=function(t){var e=1;me(R.matrix,t);for(var r=R.x;de(N,{x:r,y:R.y,matrix:R.matrix});)if(r+=e,(e=-(e+(e>0?1:-1)))>R.matrix[0].length)return me(R.matrix,-t),void A({x:R.x,y:R.y,matrix:R.matrix});A({x:r,y:R.y,matrix:R.matrix})},me=function(t,e){try{for(var r=0;r<t.length;r++)for(var n=0;n<r;n++){var a=[t[r][n],t[n][r]];t[n][r]=a[0],t[r][n]=a[1]}e>0?t.forEach((function(t){return t.reverse()})):t.reverse()}catch(c){return}},ye=function(t){de(N,{x:R.x+t,y:R.y,matrix:R.matrix})||A({x:R.x+t,y:R.y,matrix:R.matrix})},de=function(t,e){for(var r=[e.matrix,{x:e.x,y:e.y}],n=r[0],a=r[1],c=0;c<n.length;c++)for(var i=0;i<n[c].length;i++)if(0!=n[c][i]&&0!=(t[c+a.y]&&t[c+a.y][i+a.x]))return!0;return!1},pe=function(t,e,r,n){var a=xe(r,n);return e.forEach((function(t,e){t.forEach((function(t,r){0!=t&&t&&(a[e][r]=t)}))})),a},ge=function(t,e,r,n){for(var a=xe(r,n),c=function(t){e[t].forEach((function(e,r){e.forEach((function(e,n){0!=e&&e&&(a[4*t+r][n]=e)}))}))},i=0;i<e.length;i++)c(i);return a},Se=function(t,e){try{var r=t.slice();e.matrix.forEach((function(t,n){t.forEach((function(t,a){if(0!=t&&t){if(0!=r[n+e.y][a+e.x])throw new Error("error");r[n+e.y][a+e.x]=t}}))})),I(r)}catch(n){Y(!0),B(-1),A({x:0,y:0,matrix:null}),I(xe(h,O))}},we=function(){var t=N.slice(),e=y,r=1;t:for(var n=t.length-1;n>0;n--){for(var a=0;a<t[n].length;a++)if(0===t[n][a])continue t;var c=t.splice(n,1)[0].fill(0);t.unshift(c),n++,e+=10*r,r*=2}Ee(e),I(t),d(e)},Ee=function(t){t>100*S&&(w(S+1),P(.9*q))},ke=function(t){t.globalAlpha=.5,t.strokeStyle="#ccc",t.lineWidth=.01;for(var e=0;e<h;e++)t.beginPath(),t.moveTo(0,e),t.lineTo(O,e),t.stroke();for(var r=0;r<O;r++)t.beginPath(),t.moveTo(r,0),t.lineTo(r,h),t.stroke()},Re=function(t,e,r,n){n.globalAlpha=.2,n.fillStyle=v[R.matrix[e][t]],n.fillRect(r.x+t,r.y+e,1,1)},Ae=function(t,e,r,n){n.globalAlpha=1,n.fillStyle=v[R.matrix[e][t]],n.fillRect(r.x+t,r.y+e,1,1)},Ce=function(){var t=yt.one;dt({one:yt.two,two:yt.three,three:Be(Math.floor(7*Math.random())+1)}),A({x:(N[0].length/2|0)-(t[0].length/2|0),y:0,matrix:t})},Me=function(t,e,r,n,a){n.globalAlpha=1,n.fillStyle=v[a[e][t]],n.fillRect(r.x+t,r.y+e,1,1)},Ne=function(t,e,r){st.fillStyle=v[tt[e][t]],st.fillRect(t,e,1,1)},Ie=function(t,e,r){kt.fillStyle=v[ht[e][t]],kt.fillRect(t,e,1,1)},Le=function(){if(at){var t=at;ct(R.matrix),A({x:(N[0].length/2|0)-(t[0].length/2|0),y:0,matrix:t})}else ct(R.matrix),Ce()},Te=function(){Y(!1),dt({one:Be(Math.floor(7*Math.random())+1),two:Be(Math.floor(7*Math.random())+1),three:Be(Math.floor(7*Math.random())+1)}),be(W,N),function(){var t=Be(Math.floor(7*Math.random())+1);A({x:(N[0].length/2|0)-(t[0].length/2|0),y:0,matrix:t}),I(xe(h,O)),B(0),d(0),w(1),P(500)}()},Je=function(){var t=Object(f.a)(o.a.mark((function t(){var e,r,n,a,c,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($t){t.next=12;break}return e=Object(x.b)(b,"users"),r={ready:!0},t.next=5,Object(x.a)(e,r);case 5:n=t.sent,a=Object(x.g)(Object(x.b)(b,"users"),Object(x.i)("ready","==",!0)),c=Object(x.f)(a,(function(t){t.docs.forEach(function(){var t=Object(f.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id!==n.id){t.next=2;break}return t.abrupt("return");case 2:ae(e.id),ue(c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),Vt(n.id),Wt(n),t.next=17;break;case 12:return i=Object(x.d)(b,"users",Qt),t.next=15,Object(x.c)(i);case 15:zt(xe(h,O)),Ut({score:0,level:1});case 17:te(!$t);case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Be=function(t){switch(t){case 1:return[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]];case 2:return[[0,0,0,0],[0,2,2,0],[0,2,2,0],[0,0,0,0]];case 3:return[[0,3,0,0],[0,3,0,0],[0,3,3,0],[0,0,0,0]];case 4:return[[0,0,4,0],[0,0,4,0],[0,4,4,0],[0,0,0,0]];case 5:return[[0,5,0,0],[0,5,0,0],[0,5,0,0],[0,5,0,0]];case 6:return[[0,0,0,0],[0,6,6,0],[6,6,0,0],[0,0,0,0]];case 7:return[[0,0,0,0],[7,7,0,0],[0,7,7,0],[0,0,0,0]];default:return null}};return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("canvas",{className:"app-tetris",ref:t}),Object(j.jsxs)("div",{className:"hold-next",children:[Object(j.jsx)("canvas",{className:"hold-text",ref:a}),Object(j.jsx)("canvas",{className:"hold",ref:e}),Object(j.jsx)("canvas",{className:"next-text",ref:c}),Object(j.jsx)("canvas",{className:"next",ref:r})]}),Object(j.jsx)("canvas",{className:"enemy-tetris",ref:i})]}),Object(j.jsxs)("div",{children:["Score: ".concat(y," \t Level: ").concat(S),"Score: ".concat(Dt.score," \t Level: ").concat(Dt.level)]}),Object(j.jsx)("button",{onClick:function(){return Te()},children:"Start"}),Object(j.jsx)("button",{onClick:function(){return Je()},children:$t?"Ready":"Not Ready"})]})};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.3005c97d.chunk.js.map